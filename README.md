# 基于ARM-Linux的模拟电梯显示系统

开发环境:VScode、Ubuntu20.04、S5P6818开发板（ARM架构-Linux操作系统）

技术栈：C++，饿汉模式，多线程，LCD显示屏，触摸屏, madplay移植，cmake

功能简介：

（一）运行程序，电梯默认在1楼，显示屏左边可以循环播放广告，显示屏右边显示所有的楼层按键，有1楼~10楼。显示屏中间显示目前所在楼层，如果电梯在移动中，会显示上升或者下降的图标。

（二）按下对应楼层的按键后，按键会高亮显示。如果按下当前所在楼层的按键，则没有任何反应。再次按下已经高亮的按键，如果该楼层不是目前正在前往的楼层，则会取消前往该楼层，同时按键高亮取消。

（三）到达对应楼层，进行语音播报，如：“1楼到了”。

（四）乱序按下多个楼层的按键，则电梯运行顺序与正常电梯运行顺序完全一致。如：

1.当前在1楼，依次按下10，8，6，4，则电梯依次到达：4，6，8，10。

2.当前在5楼，依次按下10，7，2，4，则电梯依次到达：7，10，4，2。

3.当前在从6楼下降至5楼的过程中，依次按下9，7，1，3，则电梯依次到达：5，3，1，7，9。

代码内容概括：

elevator.h  elevator.cpp：电梯类的封装。实现记录当前所在楼层，按下的所有楼层，即将前往的楼层，以及电梯移动的逻辑控制。

lcd.h  lcd.cpp：屏幕类的封装。以饿汉模式进行封装，保证只能创建一个单例对象，保证硬件资源的有序调用。实现LCD、触摸屏的硬件初始化以及资源释放，显示任意合理大小的bmp图片，获取手指按下的坐标或者滑动的方向

main.cpp：主循环不断获取来自触摸屏的信息，以更新电梯的运行状态。一条线程实现电梯的移动，一条线程循环播放广告，

CMakeLists.txt：进入build文件夹，终端输入“cmake  ..”，接着输入make，然后可执行文件target会生成在当前路径下

pic文件夹：所有用到的图片。  mp3文件夹：所有用到的播报音频。
